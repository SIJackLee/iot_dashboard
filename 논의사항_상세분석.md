# UI 개선 논의사항 상세 분석

## 논의 사항 1: 마이그레이션 전략

### 옵션 A: 점진적 마이그레이션 (권장) ⭐

**방식:**
- 한 번에 하나의 컴포넌트만 교체
- 기존 컴포넌트와 새 컴포넌트 병행 사용 가능
- 단계별 테스트 및 검증

**장점:**
- ✅ 안정성 높음 (기존 기능 유지)
- ✅ 문제 발생 시 롤백 용이
- ✅ 단계별 피드백 수집 가능
- ✅ 개발 리스크 최소화

**단점:**
- ⚠️ 시간이 더 걸림
- ⚠️ 일시적으로 두 가지 스타일 혼재

**구현 예시:**
```typescript
// Week 1: Button만 교체
// Week 2: Badge, Card 교체
// Week 3: Table 교체
// ...
```

---

### 옵션 B: 한 번에 교체

**방식:**
- 모든 컴포넌트를 동시에 교체
- 큰 PR로 일괄 변경

**장점:**
- ✅ 빠른 완료
- ✅ 스타일 통일성 즉시 확보

**단점:**
- ❌ 버그 발생 시 원인 파악 어려움
- ❌ 롤백이 어려움
- ❌ 테스트 범위가 넓어짐
- ❌ 리스크 높음

---

### 💡 제안: 옵션 A (점진적)

**이유:**
- 현재 시스템이 정상 작동 중이므로 안정성 우선
- 단계별로 검증하면서 진행하는 것이 안전
- 문제 발생 시 즉시 대응 가능

**실행 계획:**
1. **1주차:** Button, Badge, Card (기본 컴포넌트)
2. **2주차:** Table, Input, Select (복잡한 컴포넌트)
3. **3주차:** Skeleton, Toast (새로운 컴포넌트)

---

## 논의 사항 2: 테이블 모바일 처리

### 옵션 A: 카드 뷰로 변환 (권장) ⭐

**방식:**
```typescript
// Mobile: < 640px
{isMobile ? (
  <FarmSummaryCards items={items} />
) : (
  <FarmSummaryTable items={items} />
)}
```

**장점:**
- ✅ 모바일 UX 최적화 (스크롤 불필요)
- ✅ 터치 친화적 (카드 전체 클릭 가능)
- ✅ 정보 가독성 향상
- ✅ 모바일 사용자 경험 우수

**단점:**
- ⚠️ 별도 컴포넌트 필요 (FarmSummaryCards)
- ⚠️ 유지보수 대상 증가

**구현 예시:**
```typescript
// FarmSummaryCard (모바일용)
<div className="p-4 border rounded-lg">
  <div className="flex justify-between mb-2">
    <h3>{item.registNo}</h3>
    <Badge>{state}</Badge>
  </div>
  <div className="grid grid-cols-2 gap-2 text-sm">
    <div>정상: {item.normal}</div>
    <div>경고: {item.warn}</div>
    <div>위험: {item.danger}</div>
    <div>오프라인: {item.offline}</div>
  </div>
</div>
```

---

### 옵션 B: 가로 스크롤

**방식:**
```typescript
<div className="overflow-x-auto">
  <FarmSummaryTable items={items} />
</div>
```

**장점:**
- ✅ 컴포넌트 재사용 (테이블 그대로 사용)
- ✅ 구현 간단
- ✅ 데스크톱과 동일한 정보 구조

**단점:**
- ❌ 모바일에서 가로 스크롤 필요 (UX 저하)
- ❌ 터치로 스크롤하기 불편
- ❌ 정보 일부가 화면 밖에 있음

---

### 💡 제안: 옵션 A (카드 뷰)

**이유:**
- 모바일 사용자 경험이 더 중요
- IoT 대시보드는 모바일에서도 자주 사용될 가능성
- 카드 뷰가 모바일에서 더 직관적

**구현 계획:**
- `FarmSummaryCards` 컴포넌트 새로 생성
- 동일한 데이터, 다른 레이아웃
- 반응형으로 자동 전환

---

## 논의 사항 3: 필터 상태 관리

### 옵션 A: 로컬 상태 (useState) (권장) ⭐

**방식:**
```typescript
const [filters, setFilters] = useState({
  search: "",
  status: [],
  sortBy: "registNo"
});
```

**장점:**
- ✅ 구현 간단
- ✅ 빠른 반응 속도
- ✅ URL 복잡도 없음
- ✅ 초기 구현 용이

**단점:**
- ⚠️ 새로고침 시 필터 초기화
- ⚠️ URL 공유 시 필터 상태 전달 불가

**사용 시나리오:**
- 대시보드는 실시간 모니터링이 주 목적
- 필터를 공유할 필요성이 낮음
- 새로고침은 드물게 발생

---

### 옵션 B: URL 쿼리 파라미터

**방식:**
```typescript
// URL: /farms?search=FARM01&status=warn,danger
const searchParams = useSearchParams();
const filters = {
  search: searchParams.get("search") || "",
  status: searchParams.get("status")?.split(",") || []
};
```

**장점:**
- ✅ URL 공유 시 필터 상태 유지
- ✅ 브라우저 뒤로가기/앞으로가기 지원
- ✅ 북마크 가능
- ✅ 새로고침 시 필터 유지

**단점:**
- ⚠️ 구현 복잡도 증가
- ⚠️ URL이 길어질 수 있음
- ⚠️ 초기 개발 시간 증가

**사용 시나리오:**
- 필터 상태를 공유해야 하는 경우
- 북마크로 특정 필터 상태 저장 필요
- 복잡한 필터링이 필요한 경우

---

### 💡 제안: 옵션 A (로컬 상태) → 필요시 확장

**이유:**
- 현재 요구사항에서는 필터 공유 필요성 낮음
- 구현 간단하고 빠르게 완료 가능
- 나중에 필요하면 URL 쿼리로 확장 가능

**확장 계획:**
- Phase 1: 로컬 상태로 구현
- Phase 2: 필요시 URL 쿼리로 마이그레이션

---

## 논의 사항 4: Pie 차트 위치

### 옵션 A: KPI 카드 아래 (권장) ⭐

**레이아웃:**
```
[KPI Cards - 4개]
  ↓
[Pie Chart - 전체 상태 분포]
  ↓
[Farm Summary Table]
```

**장점:**
- ✅ 정보 흐름이 자연스러움 (요약 → 상세)
- ✅ KPI와 차트가 함께 보여 요약 정보 강조
- ✅ 테이블과 분리되어 가독성 좋음
- ✅ 모바일에서도 레이아웃 깨지지 않음

**단점:**
- ⚠️ 페이지가 약간 길어짐

---

### 옵션 B: KPI 카드 옆

**레이아웃:**
```
[KPI Cards] [Pie Chart]
  (2열 그리드)
```

**장점:**
- ✅ 공간 효율적
- ✅ 한 화면에 더 많은 정보

**단점:**
- ❌ 모바일에서 레이아웃 깨짐 (세로 스택 필요)
- ❌ 차트 크기 제한
- ❌ 가독성 저하 가능

---

### 옵션 C: 별도 섹션

**레이아웃:**
```
[KPI Cards]
[Farm Summary Table]
---
[상태 분포 분석]
[Pie Chart]
```

**장점:**
- ✅ 명확한 섹션 구분
- ✅ 분석 섹션으로 확장 가능

**단점:**
- ❌ 페이지가 더 길어짐
- ❌ 초기 로딩 시 스크롤 필요

---

### 💡 제안: 옵션 A (KPI 카드 아래)

**이유:**
- 정보 계층 구조가 명확 (요약 → 시각화 → 상세)
- 반응형 레이아웃에 유리
- 사용자가 자연스럽게 정보를 소비

**구현:**
```typescript
<div className="space-y-6">
  <KpiCards ... />
  <div className="bg-white p-6 rounded-lg shadow">
    <h2 className="text-lg font-semibold mb-4">상태 분포</h2>
    <PieChart ... />
  </div>
  <FarmSummaryTable ... />
</div>
```

---

## 논의 사항 5: 실시간 피드백 범위

### 옵션 A: 모든 변경 하이라이트

**방식:**
- 데이터가 업데이트되면 모든 변경된 항목에 하이라이트
- 카드/행에 펄스 효과 또는 배경색 변경

**장점:**
- ✅ 모든 변경사항을 시각적으로 확인 가능
- ✅ 실시간성 강조

**단점:**
- ❌ 시각적 노이즈 증가 (너무 많은 하이라이트)
- ❌ 중요한 변경이 묻힐 수 있음
- ❌ 성능 이슈 가능 (많은 애니메이션)

---

### 옵션 B: 중요한 변경만 (권장) ⭐

**방식:**
- 위험/경고 상태로 변경된 항목만 하이라이트
- 정상 상태 변경은 하이라이트 없음

**장점:**
- ✅ 중요한 정보만 강조
- ✅ 시각적 노이즈 최소화
- ✅ 사용자 주의를 중요한 변경에 집중
- ✅ 성능 부담 적음

**단점:**
- ⚠️ 모든 변경을 보지 못함

**구현 예시:**
```typescript
const shouldHighlight = (oldState: string, newState: string) => {
  // 위험 또는 경고로 변경된 경우만
  return (
    (oldState !== "danger" && newState === "danger") ||
    (oldState !== "warn" && newState === "warn")
  );
};
```

---

### 옵션 C: 사용자 설정

**방식:**
- 설정에서 하이라이트 범위 선택
- "모든 변경" / "중요한 변경만" / "없음"

**장점:**
- ✅ 사용자 선호도 반영
- ✅ 유연성

**단점:**
- ⚠️ 구현 복잡도 증가
- ⚠️ 초기에는 불필요할 수 있음

---

### 💡 제안: 옵션 B (중요한 변경만)

**이유:**
- IoT 대시보드에서는 위험/경고 상태가 가장 중요
- 시각적 노이즈를 줄여 집중도 향상
- 나중에 옵션 C로 확장 가능

**구현 계획:**
- 위험/경고 상태 변경 시에만 펄스 효과
- 3초 후 자동으로 사라짐
- 필요시 설정으로 확장

---

## 종합 권장사항

### 최종 제안

1. **마이그레이션 전략:** 점진적 (옵션 A)
2. **테이블 모바일:** 카드 뷰 (옵션 A)
3. **필터 상태:** 로컬 상태 (옵션 A) → 필요시 확장
4. **Pie 차트 위치:** KPI 카드 아래 (옵션 A)
5. **실시간 피드백:** 중요한 변경만 (옵션 B)

### 이유

- **안정성 우선:** 점진적 마이그레이션으로 리스크 최소화
- **UX 최적화:** 모바일 카드 뷰, 명확한 정보 계층
- **구현 효율:** 간단한 방법으로 시작, 필요시 확장
- **사용자 경험:** 중요한 정보에 집중, 시각적 노이즈 최소화

---

## 추가 논의 사항

### 1. 애니메이션 수준

**질문:** 애니메이션을 어느 정도까지 적용할까요?

**옵션:**
- **최소:** 페이드 인/아웃만
- **중간:** 펄스, 슬라이드 (권장)
- **풍부:** 복잡한 트랜지션, 스프링 애니메이션

**제안:** 중간 수준 (framer-motion 불필요, CSS transitions로 충분)

---

### 2. 색상 팔레트

**질문:** shadcn/ui 기본 색상 vs 커스텀 색상?

**현재:**
- 정상: Green
- 경고: Yellow
- 위험: Red
- 오프라인: Gray

**제안:** shadcn/ui 기본 색상 사용 (일관성), 필요시 커스터마이징

---

### 3. 아이콘 라이브러리

**질문:** 아이콘은 어떻게 사용할까요?

**옵션:**
- **lucide-react:** shadcn/ui 기본 (권장)
- **react-icons:** 더 많은 아이콘
- **커스텀 SVG:** 특수 아이콘만

**제안:** lucide-react (shadcn/ui와 통합, 충분한 아이콘)

---

## 다음 단계

1. **위 5가지 논의 사항에 대한 최종 결정**
2. **추가 논의 사항 결정 (선택적)**
3. **shadcn/ui 설치 및 Phase 1 시작**

---

## 결정 체크리스트

- [ ] 마이그레이션 전략: A / B
- [ ] 테이블 모바일: A / B
- [ ] 필터 상태: A / B
- [ ] Pie 차트 위치: A / B / C
- [ ] 실시간 피드백: A / B / C
- [ ] 애니메이션 수준: 최소 / 중간 / 풍부
- [ ] 색상 팔레트: 기본 / 커스텀
- [ ] 아이콘: lucide-react / react-icons / 커스텀
